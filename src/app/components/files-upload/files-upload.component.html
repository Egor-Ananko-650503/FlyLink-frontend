<ngfFormData
  [(FormData)]="formData"
  [files]="files"
></ngfFormData>

<ngfUploadStatus
  [(percent)]="progress"
  [httpEvent]="httpEvent"
></ngfUploadStatus>

<div class="inline-block">
  <div ngfDrop
       [(files)]="files"
       [(file)]="lastUploadedFile"
       [(lastInvalids)]="lastInvalids"
       [(validDrag)]="validDrag"
       [(invalidDrag)]="invalidDrag"
       [accept]="accept"
       [ngClass]="{'myHoverClass': validDrag, 'myAntiHoverClass': validDrag}"
       class="drop-zone"
       [class.invalid-drag]="validDrag === false"
       [class.valid-drag]="validDrag"
  >Drop files here
  </div>
  <div>
    <strong>accept:</strong>
  </div>
  <div>
    <input type="text" [(ngModel)]="accept">
  </div>
</div>

<div class="bg-warning" *ngIf="lastInvalids?.length" style="margin-bottom: 40px">
  <h3 style="color:red;">Last {{ lastInvalids.length }} Invalid Selected Files</h3>

  <table class="table">
    <thead>
    <tr>
      <th>Name</th>
      <th>Error</th>
      <th>Type</th>
      <th>Size</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let item of lastInvalids;let i=index">
      <td>
        <div *ngIf="['image/gif','image/png','image/jpeg'].indexOf(item.file.type)>=0">
          <div class="previewIcon" [ngfBackground]="item.File"></div>
        </div>
        <strong>{{ item.file.name }}</strong>
      </td>
      <td nowrap>
        {{ item.errorType }}
      </td>
      <td nowrap>
        {{ item.file.type }}
      </td>
      <td nowrap>
        {{ item.file.size / 1024 / 1024 | number:'.2' }} MB
      </td>
      <td nowrap>
        <button type="button"
                class="btn btn-danger btn-xs"
                (click)="lastInvalids.splice(i,1)"
        >
          <span class="glyphicon glyphicon-trash"></span>
        </button>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<div style="margin-bottom: 40px">
  <h3>{{ files.length }} Queued Files</h3>
  <table class="table">
    <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Size</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let item of files;let i=index">
      <td>
        <div *ngIf="['image/gif','image/png','image/jpeg'].indexOf(item.type)>=0">
          <div class="previewIcon" [ngfBackground]="item"></div>
        </div>
        <strong>{{ item.name }}</strong>
      </td>
      <td nowrap>
        {{ item.type }}
      </td>
      <td nowrap>
        {{ item.size / 1024 / 1024 | number:'.2' }} MB
      </td>
      <td nowrap>
        <button type="button"
                class="btn btn-danger btn-xs"
                (click)="files.splice(i,1)"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </tr>
    </tbody>
  </table>
</div>
